

## Описание проекта

Данный проект представляет собой утилиту на Python, которая выполняет трассировку маршрута до заданного IP-адреса или доменного имени и определяет информацию о каждом маршрутизаторе на пути:

- IP-адрес;
- номер автономной системы (AS);
- страна;
- провайдер (NetName).

Это позволяет визуализировать путь прохождения пакета через сеть, понять, через какие автономные системы он проходит, и какие организации задействованы.

---

## Цель задачи
- Выполнить трассировку (`traceroute`) до узла.
- Определить IP-адреса маршрутизаторов на пути.
- Определить номер автономной системы для каждого "белого" IP-адреса.
  - страну;
  - провайдера.

---

## Что делает программа

1. Пользователь указывает адрес назначения (например, `e1.ru` или `8.8.8.8`).
2. Программа формирует ICMP-запросы вручную и отправляет их с разным значением TTL (Time-To-Live).
3. Для каждого маршрутизатора, который отвечает, программа:
   - извлекает его IP-адрес;
   - определяет, является ли IP "белым" (неприватным);
   - выполняет WHOIS-запрос для определения:
     - номера автономной системы (AS),
     - страны,
     - названия провайдера (NetName).
4. Все данные выводятся в виде таблицы:
   ```
   +----+-----------------+----------+---------+----------+
   | №  | IP              | AS       | Country | Provider |
   +----+-----------------+----------+---------+----------+
   | 1  | *               | -        | -       | -        |
   | 2  | 195.19.220.24   | AS44310  | RU      | NGSNET   |
   +----+-----------------+----------+---------+----------+
   ```
5. Если маршрутизатор не отвечает, в таблице отображается `*`.

---

## Установка и запуск

### 1. Требования

- Python 3.7+
- Установленный пакет [`tabulate`](https://pypi.org/project/tabulate/)

### 2. Установка зависимостей

```bash
pip install tabulate
```

### 3. Права администратора

Для работы с ICMP через сырые сокеты программа требует **запуска от администратора**:

- **Windows**: откройте `cmd.exe` или `PowerShell` от имени администратора.
- **Linux/macOS**: используйте `sudo`.

### 4. Запуск программы

```bash
python a.py e1.ru
```

Или:

```bash
python a.py 8.8.8.8
```

Если адрес не указан, используется `8.8.8.8` по умолчанию.

---

## Компоненты кода

- `socket(..., SOCK_RAW, IPPROTO_ICMP)` — используется для отправки ICMP-пакетов вручную.
- `package_assembly()` — формирует IP-заголовок и ICMP-запрос.
- `recvfrom()` — получает ответ ICMP.
- `get_info()` — определяет AS, страну и провайдера через WHOIS.
- `tabulate()` — форматирует результат в виде таблицы.

---

## Пример вывода

```
Tracing route to 195.19.220.24

+----+-----------------+----------+---------+----------+
| №  | IP              | AS       | Country | Provider |
+----+-----------------+----------+---------+----------+
| 1  | *               | -        | -       | -        |
| 2  | *               | -        | -       | -        |
| 3  | 195.19.220.24   | AS44310  | RU      | NGSNET   |
+----+-----------------+----------+---------+----------+
```

---

## Структура проекта

```
.
├── a.py         # Основной скрипт трассировки
├── README.md    # Документация
```

---

## Возможные ограничения

- Некоторые маршрутизаторы не отвечают на ICMP-запросы → отображаются как `*`.
- WHOIS-данные могут быть неполными или неактуальными.
- Без прав администратора программа не сможет работать (ошибка Permission Denied).
- Для стабильной работы WHOIS-запросов желательно активное подключение к интернету и доступ к внешним портам.
